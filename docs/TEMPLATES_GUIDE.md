# üìù –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —à–∞–±–ª–æ–Ω–∞–º –ø–∏—Å–µ–º

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞–º–∏ email –∏–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏ —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ (welcome)
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è (password_reset)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (notification)

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è
- ‚úÖ –í—Ä—É—á–Ω—É—é –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω–∞—Ö
- `{{username}}` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `{{reset_link}}` - —Å—Å—ã–ª–∫–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
- `{{message}}` - –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## üìã –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:8080/admin
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"üìù –®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º"**
3. –ù–∞–∂–º–∏—Ç–µ **"‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"** –Ω–∞ –Ω—É–∂–Ω–æ–º —à–∞–±–ª–æ–Ω–µ
4. –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–µ–º—É –∏/–∏–ª–∏ HTML —Ç–µ–ª–æ –ø–∏—Å—å–º–∞
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `{{username}}`, `{{reset_link}}` –∏ —Ç.–¥.
6. –ù–∞–∂–º–∏—Ç–µ **"üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω"**

### –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º —Å —à–∞–±–ª–æ–Ω–∞–º–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:8080/admin
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"üìß –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º"**
3. –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
4. –®–∞–±–ª–æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –≤ —Ñ–æ—Ä–º—É
5. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ
6. –ù–∞–∂–º–∏—Ç–µ **"üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ"**

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã

### 1. welcome (–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ)
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `{{username}}` - –∏–º—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–∏–º–µ—Ä:**
```html
<h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{username}}!</h2>
<p>–°–ø–∞—Å–∏–±–æ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ.</p>
```

### 2. password_reset (–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è)
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `{{username}}` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `{{reset_link}}` - —Å—Å—ã–ª–∫–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è

**–ü—Ä–∏–º–µ—Ä:**
```html
<h2>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h2>
<p>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {{username}}!</p>
<p><a href="{{reset_link}}">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å</a></p>
```

### 3. notification (–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ)
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –í—Ä—É—á–Ω—É—é –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `{{message}}` - –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä:**
```html
<h2>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h2>
<p>{{message}}</p>
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –¢–∞–±–ª–∏—Ü–∞ –ë–î: email_templates

```sql
CREATE TABLE email_templates (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) UNIQUE NOT NULL,
    subject VARCHAR(255) NOT NULL,
    body TEXT NOT NULL,
    description VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### –§—É–Ω–∫—Ü–∏–∏ –≤ email.php

```php
// –ü–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω –∏–∑ –ë–î
getEmailTemplate($templateName)

// –ó–∞–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω–µ
replaceTemplateVars($text, $vars)

// –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —à–∞–±–ª–æ–Ω welcome)
sendWelcomeEmail($email, $username)

// –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —à–∞–±–ª–æ–Ω password_reset)
sendPasswordResetEmail($email, $username, $token)
```

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí –®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º
2. –ù–∞–∂–º–∏—Ç–µ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –Ω–∞ —à–∞–±–ª–æ–Ω–µ "welcome"
3. –ò–∑–º–µ–Ω–∏—Ç–µ HTML:
```html
<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
    <h2 style="color: #4CAF50;">üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{username}}!</h2>
    <p>–ú—ã —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ!</p>
    <p>–í–∞—à –∞–∫–∫–∞—É–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω.</p>
    <p><a href="http://localhost:8080/login">–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</a></p>
</div>
```
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
5. –¢–µ–ø–µ—Ä—å –≤—Å–µ –Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –ø–æ–ª—É—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ

### –ü—Ä–∏–º–µ—Ä 2: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω–æ–µ –ø–∏—Å—å–º–æ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º
2. –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"
3. –ó–∞–º–µ–Ω–∏—Ç–µ `{{message}}` –Ω–∞ —Å–≤–æ–π —Ç–µ–∫—Å—Ç:
```html
<div style="font-family: Arial, sans-serif;">
    <h2>–í–∞–∂–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ!</h2>
    <p>–£–≤–∞–∂–∞–µ–º—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏!</p>
    <p>–ú—ã –æ–±–Ω–æ–≤–∏–ª–∏ –Ω–∞—à —Å–∞–π—Ç. –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏...</p>
</div>
```
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ

## üé® –°–æ–≤–µ—Ç—ã –ø–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ inline —Å—Ç–∏–ª–∏
Email –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≤–Ω–µ—à–Ω–∏–µ CSS, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ inline —Å—Ç–∏–ª–∏:
```html
<p style="color: #333; font-size: 14px;">–¢–µ–∫—Å—Ç</p>
```

### –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —à–∏—Ä–∏–Ω—É
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ 600px –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
```html
<div style="max-width: 600px; margin: 0 auto;">
    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
</div>
```

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –º–∞–∫–µ—Ç–æ–≤
–î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ —Å—Ç–∞—Ä—ã–º–∏ email –∫–ª–∏–µ–Ω—Ç–∞–º–∏:
```html
<table width="100%" cellpadding="0" cellspacing="0">
    <tr>
        <td>–ö–æ–Ω—Ç–µ–Ω—Ç</td>
    </tr>
</table>
```

### –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ
–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–∏—Å—å–º–∞ —Å–µ–±–µ –ø–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤–æ–π —Ä–∞—Å—Å—ã–ª–∫–æ–π.

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ CSRF –∑–∞—â–∏—Ç–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ HTML —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è email –∞–¥—Ä–µ—Å–æ–≤
- ‚úÖ –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∑–∞–ø—Ä–æ—Å:
```sql
INSERT INTO email_templates (name, subject, body, description) VALUES
('custom', '–¢–µ–º–∞ –ø–∏—Å—å–º–∞', '<p>HTML —Ç–µ–ª–æ</p>', '–û–ø–∏—Å–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞');
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–æ–≤

```bash
docker-compose -f docker-compose.dev.yml exec db mysql -uapp_user -papp_password app_db -e "SELECT * FROM email_templates;"
```

### –°–±—Ä–æ—Å —à–∞–±–ª–æ–Ω–æ–≤ –∫ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º

–ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –ë–î:
```bash
docker-compose -f docker-compose.dev.yml down -v
docker-compose -f docker-compose.dev.yml up -d
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω–∞—Ö
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∏—Å—å–º–∞ –ø–æ —à–∞–±–ª–æ–Ω–∞–º
- ‚úÖ –®–∞–±–ª–æ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è
